<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Math Mastery Â© Papanikolaou Georgios</title>
    <style>
        :root { --primary: #2c3e50; --success: #27ae60; --error: #e74c3c; --info: #3498db; }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background: #f4f7f6; text-align: center; padding: 10px; }
        .container { max-width: 650px; margin: auto; background: white; padding: 25px; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); border: 1px solid #ddd; position: relative; }
        
        /* Modal Styles */
        .modal { display: none; position: fixed; z-index: 2000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); }
        .modal-content { background: white; margin: 10% auto; padding: 25px; border-radius: 15px; width: 85%; max-width: 500px; text-align: left; line-height: 1.6; }
        .close-btn { float: right; cursor: pointer; font-size: 24px; font-weight: bold; color: #888; }

        /* Header Buttons */
        .top-nav { display: flex; justify-content: space-between; margin-bottom: 20px; }
        .nav-btn { background: #eee; border: 1px solid #ccc; padding: 8px 12px; border-radius: 8px; cursor: pointer; font-size: 0.85rem; font-weight: bold; transition: 0.3s; }
        .nav-btn:hover { background: #ddd; }

        #ladder { display: flex; justify-content: center; gap: 6px; margin-bottom: 5px; background: #f0f0f0; padding: 12px; border-radius: 12px; }
        .step { width: 32px; height: 18px; background: #ddd; border-radius: 4px; transition: 0.4s; }
        .step.on:nth-child(-n+3) { background: #3498db; }
        .step.on:nth-child(n+4):nth-child(-n+7) { background: #2ecc71; }
        .step.on:nth-child(n+8) { background: #e74c3c; }

        #trophies-bin { font-size: 1.8rem; margin: 10px 0; min-height: 45px; background: #fffbe6; border-radius: 10px; display: flex; justify-content: center; align-items: center; border: 1px dashed #f1c40f; color: #f1c40f; }

        .num-box { font-size: 3.2rem; font-weight: bold; margin: 15px 0; padding: 15px; background: #f8f9fa; border: 3px solid #34495e; border-radius: 15px; color: var(--primary); min-height: 85px; display: flex; justify-content: center; align-items: center; }
        #check-mark { display: none; color: var(--success); margin-left: 15px; font-size: 2.8rem; animation: pop 0.4s ease-out; }

        .grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; margin: 15px 0; }
        .btn-opt { padding: 14px 5px; border: 2px solid #ddd; border-radius: 10px; cursor: pointer; font-weight: bold; background: white; transition: 0.2s; }
        .btn-opt.active { background: #1a252f !important; color: #fff !important; transform: scale(0.95); }
        
        .special-btn { background: #e67e22; color: white; padding: 12px; margin: 5px auto; border-radius: 8px; border: none; cursor: pointer; font-weight: bold; width: 90%; display: block; }
        .special-btn.active { background: #873600 !important; }

        .hard-buttons { display: flex; justify-content: center; gap: 15px; margin-top: 10px; }
        .btn-hard-spec { background: #9b59b6; color: white; padding: 12px 25px; border-radius: 8px; border: none; cursor: pointer; font-weight: bold; }
        .btn-hard-spec.active { background: #4a235a !important; }

        input { font-size: 1.6rem; padding: 10px; width: 50%; text-align: center; border-radius: 8px; border: 2px solid var(--primary); }
        button.main-btn { padding: 16px 35px; font-size: 1.3rem; cursor: pointer; border: none; border-radius: 12px; background: var(--success); color: white; font-weight: bold; margin: 15px; width: 220px; box-shadow: 0 5px #1e8449; }

        #feedback { height: 35px; font-weight: bold; margin: 10px; }
        #help { display: none; background: #fffde7; padding: 15px; border-radius: 10px; border-left: 5px solid #f1c40f; margin-top: 15px; }

        @keyframes pop { 0% { transform: scale(0); } 100% { transform: scale(1); } }
        footer { margin-top: 35px; font-size: 0.85rem; color: #555; border-top: 1px solid #ddd; padding-top: 15px; }
    </style>
</head>
<body>

<div class="container">
    <div class="top-nav">
        <button class="nav-btn" onclick="openModal('modal-instr')">â„¹ï¸ Instructions</button>
        <button class="nav-btn" onclick="openModal('modal-pedag')">ğŸ“ For Teachers</button>
    </div>

    <h3 style="margin-top:0; color:#b22222;">ÎœÎµ Ï€Î¿Î¹Î¿Ï…Ï‚ Î±ÏÎ¹Î¸Î¼Î¿ÏÏ‚ Î´Î¹Î±Î¹ÏÎµÎ¯Ï„Î±Î¹;</h3>
    
    <div id="ladder">
        <div class="step" id="s1"></div><div class="step" id="s2"></div><div class="step" id="s3"></div>
        <div class="step" id="s4"></div><div class="step" id="s5"></div><div class="step" id="s6"></div>
        <div class="step" id="s7"></div><div class="step" id="s8"></div><div class="step" id="s9"></div>
        <div class="step" id="s10"></div>
    </div>
    <div id="trophies-bin">Î ÏÎ¿Î¸Î®ÎºÎ· ÎšÏ…Ï€Î­Î»Î»Ï‰Î½</div>

    <div style="margin-bottom: 12px;">
        <button onclick="setMode('easy')" style="background:#3498db; color:white; border:none; padding:7px 15px; border-radius:5px; cursor:pointer; font-weight:bold;">Î•Î¥ÎšÎŸÎ›ÎŸ</button>
        <button onclick="setMode('hard')" style="background:#9b59b6; color:white; border:none; padding:7px 15px; border-radius:5px; cursor:pointer; font-weight:bold;">Î”Î¥Î£ÎšÎŸÎ›ÎŸ</button>
    </div>

    <div id="instr" style="color:#555; font-weight:bold; font-size:0.9rem"></div>
    <div class="num-box">
        <span id="main-num">---</span><span id="check-mark">âœ“</span>
    </div>
    
    <div id="game-zone"></div>
    <div id="feedback"></div>
    
    <button class="main-btn" onclick="check()">Î•Î›Î•Î“Î§ÎŸÎ£</button>
    <div><button onclick="start()" style="cursor:pointer; padding:8px; background:none; border:none; color:#888; text-decoration:underline;">Î‘Î»Î»Î±Î³Î® Î‘ÏÎ¹Î¸Î¼Î¿Ï</button></div>

    <div id="help"></div>

    <footer>
        Intra-school Training Professional Development in Mathematics<br>
        <strong>Papanikolaou Georgios Â© 2025</strong>
    </footer>
</div>

<div id="modal-instr" class="modal">
    <div class="modal-content">
        <span class="close-btn" onclick="closeModal('modal-instr')">&times;</span>
        <h2 style="color:var(--info)">ÎŸÎ´Î·Î³Î¯ÎµÏ‚ Î§ÏÎ®ÏƒÎ·Ï‚</h2>
        <ul>
            <li><strong>Î•Ï€Î¯Ï€ÎµÎ´Î¿ Î•ÏÎºÎ¿Î»Î¿:</strong> Î•Ï€Î¹Î»Î­Î¾Ï„Îµ ÏŒÎ»Î± Ï„Î± ÎºÎ¿Ï…Î¼Ï€Î¹Î¬ Ï€Î¿Ï… ÎµÎ¯Î½Î±Î¹ Î´Î¹Î±Î¹ÏÎ­Ï„ÎµÏ‚ Ï„Î¿Ï… Î±ÏÎ¹Î¸Î¼Î¿Ï. Î‘Î½ Î¿ Î±ÏÎ¹Î¸Î¼ÏŒÏ‚ Î´ÎµÎ½ Î´Î¹Î±Î¹ÏÎµÎ¯Ï„Î±Î¹ Î¼Îµ ÎºÎ±Î½Î­Î½Î±Î½, Ï€Î±Ï„Î®ÏƒÏ„Îµ "Î ÏÏÏ„Î¿Ï‚ Î‘ÏÎ¹Î¸Î¼ÏŒÏ‚".</li>
            <li><strong>Î•Ï€Î¯Ï€ÎµÎ´Î¿ Î”ÏÏƒÎºÎ¿Î»Î¿:</strong> Î£Ï…Î¼Ï€Î»Î·ÏÏÏƒÏ„Îµ Ï„Î¿ ÏˆÎ·Ï†Î¯Î¿ Ï€Î¿Ï… Î»ÎµÎ¯Ï€ÎµÎ¹ [x] ÏÏƒÏ„Îµ Î¿ Î±ÏÎ¹Î¸Î¼ÏŒÏ‚ Î½Î± Î´Î¹Î±Î¹ÏÎµÎ¯Ï„Î±Î¹ Î¼Îµ Ï„Î¿Î½ ÏƒÏ„ÏŒÏ‡Î¿. Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î®ÏƒÏ„Îµ Ï„Î± "ÎŸÎ›ÎŸÎ™" Î® "ÎšÎ‘ÎÎ•Î™Î£" Î±Î½ Ï„Î±Î¹ÏÎ¹Î¬Î¶Î¿Ï…Î½ ÏŒÎ»Î± Î® ÎºÎ±Î½Î­Î½Î± ÏˆÎ·Ï†Î¯Î¿.</li>
            <li><strong>Î£ÎºÎ¬Î»Î± Î ÏÎ¿ÏŒÎ´Î¿Ï…:</strong> ÎšÎ¬Î¸Îµ ÏƒÏ‰ÏƒÏ„Î® Î±Ï€Î¬Î½Ï„Î·ÏƒÎ· ÏƒÎ±Ï‚ Î±Î½ÎµÎ²Î¬Î¶ÎµÎ¹! Î£Ï„Î¹Ï‚ 10 ÎµÏ€Î¹Ï„Ï…Ï‡Î¯ÎµÏ‚ ÎºÎµÏÎ´Î¯Î¶ÎµÏ„Îµ Î­Î½Î± Ï‡ÏÏ…ÏƒÏŒ ÎºÏÏ€ÎµÎ»Î»Î¿.</li>
        </ul>
    </div>
</div>

<div id="modal-pedag" class="modal">
    <div class="modal-content">
        <span class="close-btn" onclick="closeModal('modal-pedag')">&times;</span>
        <h2 style="color:var(--success)">Î•ÎºÏ€Î±Î¹Î´ÎµÏ…Ï„Î¹ÎºÎ® Î‘Î¾Î¯Î± & Î£Ï„ÏŒÏ‡Î¿Î¹</h2>
        <p><strong>Î£Ï„Î¿Ï‡Î¿Î¸ÎµÏƒÎ¯Î±:</strong></p>
        <ul>
            <li>Î•Î¼Ï€Î­Î´Ï‰ÏƒÎ· Ï„Ï‰Î½ ÎºÏÎ¹Ï„Î·ÏÎ¯Ï‰Î½ Î´Î¹Î±Î¹ÏÎµÏ„ÏŒÏ„Î·Ï„Î±Ï‚ (2, 3, 4, 5, 8, 9, 10, 100).</li>
            <li>Î‘Î½Î¬Ï€Ï„Ï…Î¾Î· Ï…Ï€Î¿Î»Î¿Î³Î¹ÏƒÏ„Î¹ÎºÎ®Ï‚ ÏƒÎºÎ­ÏˆÎ·Ï‚ ÎºÎ±Î¹ Î±Î½Î±Î³Î½ÏÏÎ¹ÏƒÎ· Ï€ÏÎ¿Ï„ÏÏ€Ï‰Î½.</li>
            <li>Î”Î¹Î¬ÎºÏÎ¹ÏƒÎ· Î¼ÎµÏ„Î±Î¾Ï ÏƒÏÎ½Î¸ÎµÏ„Ï‰Î½ ÎºÎ±Î¹ Ï€ÏÏÏ„Ï‰Î½ Î±ÏÎ¹Î¸Î¼ÏÎ½.</li>
        </ul>
        <p><strong>Î Î±Î¹Î´Î±Î³Ï‰Î³Î¹ÎºÎ® Î‘Î¾Î¯Î±:</strong></p>
        <p>Î¤Î¿ ÎµÏÎ³Î±Î»ÎµÎ¯Î¿ Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÎµÎ¯ Ï„ÎµÏ‡Î½Î¹ÎºÎ­Ï‚ <em>Gamification</em> Î³Î¹Î± Ï„Î· Î¼ÎµÎ¯Ï‰ÏƒÎ· Ï„Î¿Ï… Î¼Î±Î¸Î·Î¼Î±Ï„Î¹ÎºÎ¿Ï Î¬Î³Ï‡Î¿Ï…Ï‚. Î— Î¬Î¼ÎµÏƒÎ· Î±Î½Î±Ï„ÏÎ¿Ï†Î¿Î´ÏŒÏ„Î·ÏƒÎ· (Î®Ï‡Î¿Î¹, ÏƒÎºÎ¬Î»Î±) Î²Î¿Î·Î¸Î¬ ÏƒÏ„Î·Î½ Î±Ï…Ï„Î¿Î´Î¹ÏŒÏÎ¸Ï‰ÏƒÎ·, ÎµÎ½Ï Î· ÎºÎ»Î¹Î¼Î±ÎºÎ¿ÏÎ¼ÎµÎ½Î· Î´Ï…ÏƒÎºÎ¿Î»Î¯Î± ÎµÏ€Î¹Ï„ÏÎ­Ï€ÎµÎ¹ Ï„Î· Î´Î¹Î±Ï†Î¿ÏÎ¿Ï€Î¿Î¹Î·Î¼Î­Î½Î· Î´Î¹Î´Î±ÏƒÎºÎ±Î»Î¯Î± ÏƒÏ„Î·Î½ Ï„Î¬Î¾Î·.</p>
    </div>
</div>

<audio id="applause-sound" src="https://www.soundjay.com/human/applause-01.mp3"></audio>
<audio id="fail-sound" src="https://www.soundjay.com/communication/sounds/fail-trumpet-01.mp3"></audio>

<script>
    let mode = 'easy'; let score = 0; let trophies = 0; let fails = 0; let data = {};
    let selected = new Set(); let isPrimeSelected = false;
    let helpShown = false; let hardSpecial = "";
    const divs = [2, 3, 4, 5, 8, 9, 10, 100];

    function openModal(id) { document.getElementById(id).style.display = "block"; }
    function closeModal(id) { document.getElementById(id).style.display = "none"; }
    window.onclick = function(event) { if (event.target.className === 'modal') event.target.style.display = "none"; }

    function setMode(m) { mode = m; score = 0; updateScore(); start(); }

    function start() {
        fails = 0; selected.clear(); isPrimeSelected = false; helpShown = false; hardSpecial = "";
        document.getElementById('feedback').innerText = "";
        document.getElementById('help').style.display = "none";
        document.getElementById('check-mark').style.display = "none";
        
        if (mode === 'easy') {
            let n;
            do { n = Math.floor(Math.random() * 800) + 12; } while (n%2!==0 && n%3!==0 && n%5!==0 && Math.random() > 0.15);
            let ans = divs.filter(d => n % d === 0);
            data = { val: n, ans: ans, isPrime: (ans.length === 0) };
            document.getElementById('instr').innerText = "Î Î¬Ï„Î·ÏƒÎµ ÏŒÎ»Î¿Ï…Ï‚ Ï„Î¿Ï…Ï‚ Î´Î¹Î±Î¹ÏÎ­Ï„ÎµÏ‚:";
            document.getElementById('main-num').innerText = n;
            renderEasy();
        } else {
            let base = Math.floor(Math.random() * 850) + 100;
            let pos = Math.floor(Math.random() * 3);
            let target = [3, 9, 5][Math.floor(Math.random()*3)];
            data = { base: base.toString(), pos: pos, target: target };
            document.getElementById('instr').innerText = `Î¨Î·Ï†Î¯Î¿ Î³Î¹Î± Î´Î¹Î±Î¹ÏÎµÏ„ÏŒÏ„Î·Ï„Î± Î¼Îµ Ï„Î¿ ${target}:`;
            document.getElementById('main-num').innerText = base.toString().slice(0, pos) + "[x]" + base.toString().slice(pos);
            renderHard();
        }
    }

    function renderEasy() {
        let h = '<div class="grid">';
        divs.forEach(d => {
            let style = (d === 4 || d === 8) ? 'style="font-size:0.95rem;"' : '';
            h += `<div class="btn-opt" id="d${d}" ${style} onclick="toggle(${d})">${d}</div>`;
        });
        h += '</div><button class="special-btn" id="primeBtn" onclick="togglePrime()">Î•Î™ÎÎ‘Î™ Î Î¡Î©Î¤ÎŸÎ£ Î‘Î¡Î™Î˜ÎœÎŸÎ£</button>';
        document.getElementById('game-zone').innerHTML = h;
    }

    function renderHard() {
        let h = '<input type="number" id="ans-in" min="0" max="9" placeholder="0-9"><div class="hard-buttons">';
        h += '<button class="btn-hard-spec" id="btnAll" onclick="setHardSpec(\'all\')">ÎŸÎ›ÎŸÎ™</button>';
        h += '<button class="btn-hard-spec" id="btnNone" onclick="setHardSpec(\'none\')">ÎšÎ‘ÎÎ•Î™Î£</button>';
        h += '</div>';
        document.getElementById('game-zone').innerHTML = h;
    }

    function toggle(d) {
        if(isPrimeSelected) togglePrime();
        const b = document.getElementById('d'+d);
        if (selected.has(d)) { selected.delete(d); b.classList.remove('active'); }
        else { selected.add(d); b.classList.add('active'); }
    }

    function togglePrime() {
        isPrimeSelected = !isPrimeSelected; selected.clear();
        document.querySelectorAll('.btn-opt').forEach(b => b.classList.remove('active'));
        document.getElementById('primeBtn').classList.toggle('active', isPrimeSelected);
    }

    function setHardSpec(val) {
        hardSpecial = (hardSpecial === val) ? "" : val;
        document.getElementById('btnAll').classList.toggle('active', hardSpecial === 'all');
        document.getElementById('btnNone').classList.toggle('active', hardSpecial === 'none');
        if(hardSpecial !== "") document.getElementById('ans-in').value = "";
    }

    function check() {
        let isOk = false;
        if (mode === 'easy') {
            if (selected.size === 0 && !isPrimeSelected) return;
            isOk = isPrimeSelected ? data.isPrime : (JSON.stringify(Array.from(selected).sort((a,b)=>a-b)) === JSON.stringify(data.ans.sort((a,b)=>a-b)));
        } else {
            let v = document.getElementById('ans-in').value.trim();
            if (v === "" && hardSpecial === "") return;
            let sol = []; for(let i=0; i<=9; i++) {
                if (parseInt(data.base.slice(0, data.pos) + i + data.base.slice(data.pos)) % data.target === 0) sol.push(i);
            }
            if (hardSpecial === "all") isOk = (sol.length === 10);
            else if (hardSpecial === "none") isOk = (sol.length === 0);
            else isOk = sol.includes(parseInt(v));
        }

        if (isOk) {
            if (!helpShown) {
                score++;
                if (score >= 10) { score = 0; trophies = Math.min(trophies + 1, 10); }
            }
            document.getElementById('feedback').innerHTML = "<span style='color:var(--success)'>âœ”ï¸ Î£Ï‰ÏƒÏ„Î¬!</span>";
            document.getElementById('check-mark').style.display = "inline";
            document.getElementById('applause-sound').play().catch(()=>{});
            setTimeout(start, 1800);
        } else {
            score = Math.max(0, score - 1); fails++;
            document.getElementById('feedback').innerHTML = "<span style='color:var(--error)'>âŒ Î›Î¬Î¸Î¿Ï‚!</span>";
            document.getElementById('fail-sound').play().catch(()=>{});
            if (fails >= 3) showCorrectAnswer();
        }
        updateScore();
    }

    function showCorrectAnswer() {
        helpShown = true;
        let h = document.getElementById('help'); h.style.display = "block";
        if (mode === 'easy') h.innerHTML = "<b>Î‘Ï€Î¬Î½Ï„Î·ÏƒÎ·:</b> " + (data.isPrime ? "Î ÏÏÏ„Î¿Ï‚!" : data.ans.join(', '));
        else {
            let sol = []; for(let i=0; i<=9; i++) { if (parseInt(data.base.slice(0, data.pos) + i + data.base.slice(data.pos)) % data.target === 0) sol.push(i); }
            h.innerHTML = "<b>Î‘Ï€Î¬Î½Ï„Î·ÏƒÎ·:</b> " + (sol.length === 10 ? "ÎŒÎ»Î¿Î¹" : (sol.length > 0 ? sol.join(', ') : "ÎšÎ±Î½ÎµÎ¯Ï‚"));
        }
    }

    function updateScore() {
        for(let i=1; i<=10; i++) document.getElementById('s'+i).classList.toggle('on', i <= score);
        let tStr = ""; for(let i=0; i<trophies; i++) tStr += "ğŸ†";
        document.getElementById('trophies-bin').innerText = tStr || "Î ÏÎ¿Î¸Î®ÎºÎ· ÎšÏ…Ï€Î­Î»Î»Ï‰Î½";
        document.getElementById('trophies-bin').style.color = trophies ? "#f1c40f" : "#aaa";
    }
    start();
</script>
</body>
</html>